Script: ./scripts/ci/quality-check.sh
Timestamp: 2025-11-06 12:26:37
Duration: 15s
Exit Code: 1
Git Branch: main
Git Commit: 65494a21544379e7ec375c80617139cfab4c4c5a
User: piotrromanczuk
Node Version: v23.11.0
System: Darwin macbookair.home 25.0.0 Darwin Kernel Version 25.0.0: Wed Sep 17 21:41:39 PDT 2025; root:xnu-12377.1.9~141/RELEASE_ARM64_T8103 arm64
----------------------------------------
Output:
üîç CODE QUALITY CHECK
====================
üîß Running TypeScript type check...
components/auth/ProtectedRoute.tsx(79,1): error TS1005: '}' expected.
[0;31m‚ùå TypeScript type errors found[0m

üßπ Running ESLint...

> guitar-crm@0.1.0 lint
> next lint

Invalid project directory provided, no such directory: /Users/piotrromanczuk/Desktop/guitar-crm/lint
[0;31m‚ùå ESLint errors found[0m

üß™ Running tests with coverage...

> guitar-crm@0.1.0 test
> ./scripts/testing/e2e.sh --coverage --watchAll=false

sh: ./scripts/testing/e2e.sh: Permission denied
[0;31m‚ùå Coverage report not found[0m
[0;31m‚ùå Coverage report not found[0m

üìù Checking for TODO/FIXME comments...
grep: ./cypress/screenshots/teacher-lessons.cy.ts: Is a directory
grep: ./components/dashboard/admin: Is a directory
grep: 2/UserListEmptyState.tsx: No such file or directory
grep: ./components/dashboard/admin: Is a directory
grep: 2/UserListLoadingState.tsx: No such file or directory
grep: ./components/dashboard/admin: Is a directory
grep: 2/UserForm.RoleSection.tsx: No such file or directory
grep: ./components/dashboard/admin: Is a directory
grep: 2/UserForm.helpers.ts: No such file or directory
grep: ./components/dashboard/admin: Is a directory
grep: 2/UserForm.Actions.tsx: No such file or directory
grep: ./components/dashboard/admin: Is a directory
grep: 2/UserForm.CheckboxInput.tsx: No such file or directory
grep: ./components/dashboard/admin: Is a directory
grep: 2/UserForm.tsx: No such file or directory
grep: ./components/dashboard/admin: Is a directory
grep: 2/UserList.helpers.ts: No such file or directory
grep: ./components/dashboard/admin: Is a directory
grep: 2/UserForm.Header.tsx: No such file or directory
grep: ./components/dashboard/admin: Is a directory
grep: 2/UserCard.tsx: No such file or directory
grep: ./components/dashboard/admin: Is a directory
grep: 2/index.ts: No such file or directory
grep: ./components/dashboard/admin: Is a directory
grep: 2/UserForm.TextInput.tsx: No such file or directory
grep: ./components/dashboard/admin: Is a directory
grep: 2/AdminStatCard.tsx: No such file or directory
grep: ./components/dashboard/admin: Is a directory
grep: 2/UserTableRow.tsx: No such file or directory
grep: ./components/dashboard/admin: Is a directory
grep: 2/UserList.tsx: No such file or directory
grep: ./components/dashboard/admin: Is a directory
grep: 2/AdminActionCard.tsx: No such file or directory
grep: ./components/dashboard/student: Is a directory
grep: 2/StudentProgressOverview.tsx: No such file or directory
grep: ./components/dashboard/student: Is a directory
grep: 2/StudentRecentLessons.tsx: No such file or directory
grep: ./components/dashboard/student: Is a directory
grep: 2/StudentDashboardStats.tsx: No such file or directory
grep: ./components/dashboard/student: Is a directory
grep: 2/StudentUpcomingLessons.tsx: No such file or directory
grep: ./components/dashboard/teacher: Is a directory
grep: 2/TeacherDashboardStats.tsx: No such file or directory
grep: ./components/dashboard/teacher: Is a directory
grep: 2/TeacherLessonSchedule.tsx: No such file or directory
grep: ./components/dashboard/teacher: Is a directory
grep: 2/TeacherStudentsList.tsx: No such file or directory
grep: ./components/dashboard/teacher: Is a directory
grep: 2/TeacherRecentLessons.tsx: No such file or directory
[1;33m‚ö†Ô∏è  Found     2921 TODO/FIXME comments[0m
grep: ./cypress/screenshots/teacher-lessons.cy.ts: Is a directory
./app/api/dashboard/stats/route.ts:86:					studentProgress: 0, // TODO: Calculate average progress
./app/api/dashboard/stats/route.ts:116:					progress: 0, // TODO: Calculate progress percentage
./app/api/lessons/route.old.ts:209:		// TODO: Implement proper cookie-based server auth and role checks when middleware is re-enabled
./app/api/lessons/route.old.ts:233:				// creator_user_id: null, // TODO: Set from authenticated user when auth is properly implemented
./app/api/lessons/[id]/route.old.ts:18:		// TODO: Implement proper cookie-based server auth when middleware is re-enabled
./app/api/lessons/[id]/route.old.ts:113:		// TODO: Implement proper cookie-based server auth and role checks when middleware is re-enabled
./app/api/lessons/[id]/route.old.ts:181:		// TODO: Implement proper cookie-based server auth and role checks when middleware is re-enabled
./node_modules/callsites/index.js:12:// TODO: Remove this for the next major release
./node_modules/callsites/index.d.ts:90:	// TODO: Remove this for the next major release, refactor the whole definition to:
./node_modules/zod/v4/core/errors.d.ts:203:export declare function toDotPath(path: (string | number | symbol)[]): string;
xargs: grep: terminated with signal 13; aborting
... and 2911 more

üß© Checking component file sizes (advisory)...
[1;33m‚ö†Ô∏è  The following files exceed 300 lines:[0m
app/admin/lessons/new/page.tsx (     314 lines)
app/api/song/route.ts (     367 lines)
app/api/lessons/bulk/route.ts (     342 lines)
app/api/lessons/handlers.ts (     365 lines)
Consider splitting into smaller, composable components.

üì¶ Checking bundle size...


üóÑÔ∏è Running Database Quality Check...
[0;34müîç DATABASE QUALITY CHECK[0m
======================

[0;34müì° Checking Supabase status...[0m
[0;32m‚úÖ Supabase is running[0m

[0;34müîç Checking test data integrity...[0m

[1;33mChecking test users:[0m
Test users count:      5

[1;33mChecking for real emails (should be 0):[0m
[0;32m‚úÖ No real emails found[0m

[1;33mChecking songs:[0m
Total songs:     13
Difficulty distribution:
 beginner     |     5
 intermediate |     5
 advanced     |     3


[1;33mChecking lessons:[0m
Total lessons:     12

[1;33mChecking lesson-songs:[0m
Total lesson-song associations:     32

[1;33mChecking task management:[0m
Total tasks:      0
Task status distribution:

Task priority distribution:


[1;33mChecking for orphaned records:[0m
[0;32m‚úÖ No orphaned lesson-song records[0m

[1;33mChecking profiles:[0m
Total profiles:      6
Role distribution:
           1 |             2 |             4


[0;34müìä DATABASE SUMMARY[0m
======================
Test Users:      5
Songs:     13
Lessons:     12
Lesson-Song Associations:     32
Assignments: 
Tasks:      0
Profiles:      6

[0;32m‚úÖ DATABASE QUALITY CHECK PASSED[0m
Database contains sufficient test data and no critical issues
[0;32m‚úÖ Database quality check passed[0m

üö¶ Lighthouse Scores
=======================
jq: error (at lighthouse-results.json:9382): null (null) and number (100) cannot be multiplied
Performance     [0;31m‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë[0m  38
Accessibility   [0;32m‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà[0m 100
Best Practices  [0;32m‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà[0m 100
SEO             [0;32m‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà[0m 100
./scripts/ci/quality-check.sh: line 74: [: PWA: integer expression expected
./scripts/ci/quality-check.sh: line 76: [: PWA: integer expression expected
./scripts/ci/quality-check.sh: line 90: printf: PWA: invalid number
                [0;31m‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë[0m   0

[1;33m‚ö†Ô∏è  Some Lighthouse scores are below 90[0m

======================
jq: error (at lighthouse-results.json:9382): null (null) and number (100) cannot be multiplied

üìä EXECUTION SUMMARY
===================

Lighthouse:
Performance:     38.00%  ‚ùå
Accessibility:  100.00%  ‚úÖ
Best Practices: 100.00%  ‚úÖ
SEO:            100.00%  ‚úÖ

======================
