35311675597ef5f2340d81f40583187a
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "createClient", {
    enumerable: true,
    get: function() {
        return createClient;
    }
});
const _ssr = require("@supabase/ssr");
const _headers = require("next/headers");
const _config = require("./config");
async function createClient() {
    const cookieStore = await (0, _headers.cookies)();
    const forceRemote = cookieStore.get('sb-provider-preference')?.value === 'remote';
    const { url, anonKey } = (0, _config.getSupabaseConfig)({
        forceRemote
    });
    return (0, _ssr.createServerClient)(url, anonKey, {
        cookies: {
            getAll () {
                return cookieStore.getAll();
            },
            setAll (cookiesToSet) {
                try {
                    cookiesToSet.forEach(({ name, value, options })=>cookieStore.set(name, value, options));
                } catch  {
                // The `setAll` method was called from a Server Component.
                // This can be ignored if you have middleware refreshing
                // user sessions.
                }
            }
        }
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3Bpb3RyL0Rlc2t0b3AvZ3VpdGFyLWNybS9saWIvc3VwYWJhc2Uvc2VydmVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVNlcnZlckNsaWVudCwgdHlwZSBDb29raWVPcHRpb25zIH0gZnJvbSAnQHN1cGFiYXNlL3Nzcic7XG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJztcbmltcG9ydCB7IGdldFN1cGFiYXNlQ29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xuXG4vKipcbiAqIElmIHVzaW5nIEZsdWlkIGNvbXB1dGU6IERvbid0IHB1dCB0aGlzIGNsaWVudCBpbiBhIGdsb2JhbCB2YXJpYWJsZS4gQWx3YXlzIGNyZWF0ZSBhIG5ldyBjbGllbnQgd2l0aGluIGVhY2hcbiAqIGZ1bmN0aW9uIHdoZW4gdXNpbmcgaXQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVDbGllbnQoKSB7XG4gIGNvbnN0IGNvb2tpZVN0b3JlID0gYXdhaXQgY29va2llcygpO1xuICBjb25zdCBmb3JjZVJlbW90ZSA9IGNvb2tpZVN0b3JlLmdldCgnc2ItcHJvdmlkZXItcHJlZmVyZW5jZScpPy52YWx1ZSA9PT0gJ3JlbW90ZSc7XG4gIGNvbnN0IHsgdXJsLCBhbm9uS2V5IH0gPSBnZXRTdXBhYmFzZUNvbmZpZyh7IGZvcmNlUmVtb3RlIH0pO1xuXG4gIHJldHVybiBjcmVhdGVTZXJ2ZXJDbGllbnQodXJsLCBhbm9uS2V5LCB7XG4gICAgY29va2llczoge1xuICAgICAgZ2V0QWxsKCkge1xuICAgICAgICByZXR1cm4gY29va2llU3RvcmUuZ2V0QWxsKCk7XG4gICAgICB9LFxuICAgICAgc2V0QWxsKGNvb2tpZXNUb1NldDogeyBuYW1lOiBzdHJpbmc7IHZhbHVlOiBzdHJpbmc7IG9wdGlvbnM6IENvb2tpZU9wdGlvbnMgfVtdKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29va2llc1RvU2V0LmZvckVhY2goKHsgbmFtZSwgdmFsdWUsIG9wdGlvbnMgfSkgPT4gY29va2llU3RvcmUuc2V0KG5hbWUsIHZhbHVlLCBvcHRpb25zKSk7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIC8vIFRoZSBgc2V0QWxsYCBtZXRob2Qgd2FzIGNhbGxlZCBmcm9tIGEgU2VydmVyIENvbXBvbmVudC5cbiAgICAgICAgICAvLyBUaGlzIGNhbiBiZSBpZ25vcmVkIGlmIHlvdSBoYXZlIG1pZGRsZXdhcmUgcmVmcmVzaGluZ1xuICAgICAgICAgIC8vIHVzZXIgc2Vzc2lvbnMuXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG59XG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwiY29va2llU3RvcmUiLCJjb29raWVzIiwiZm9yY2VSZW1vdGUiLCJnZXQiLCJ2YWx1ZSIsInVybCIsImFub25LZXkiLCJnZXRTdXBhYmFzZUNvbmZpZyIsImNyZWF0ZVNlcnZlckNsaWVudCIsImdldEFsbCIsInNldEFsbCIsImNvb2tpZXNUb1NldCIsImZvckVhY2giLCJuYW1lIiwib3B0aW9ucyIsInNldCJdLCJtYXBwaW5ncyI6Ijs7OzsrQkFRc0JBOzs7ZUFBQUE7OztxQkFSaUM7eUJBQy9CO3dCQUNVO0FBTTNCLGVBQWVBO0lBQ3BCLE1BQU1DLGNBQWMsTUFBTUMsSUFBQUEsZ0JBQU87SUFDakMsTUFBTUMsY0FBY0YsWUFBWUcsR0FBRyxDQUFDLDJCQUEyQkMsVUFBVTtJQUN6RSxNQUFNLEVBQUVDLEdBQUcsRUFBRUMsT0FBTyxFQUFFLEdBQUdDLElBQUFBLHlCQUFpQixFQUFDO1FBQUVMO0lBQVk7SUFFekQsT0FBT00sSUFBQUEsdUJBQWtCLEVBQUNILEtBQUtDLFNBQVM7UUFDdENMLFNBQVM7WUFDUFE7Z0JBQ0UsT0FBT1QsWUFBWVMsTUFBTTtZQUMzQjtZQUNBQyxRQUFPQyxZQUF1RTtnQkFDNUUsSUFBSTtvQkFDRkEsYUFBYUMsT0FBTyxDQUFDLENBQUMsRUFBRUMsSUFBSSxFQUFFVCxLQUFLLEVBQUVVLE9BQU8sRUFBRSxHQUFLZCxZQUFZZSxHQUFHLENBQUNGLE1BQU1ULE9BQU9VO2dCQUNsRixFQUFFLE9BQU07Z0JBQ04sMERBQTBEO2dCQUMxRCx3REFBd0Q7Z0JBQ3hELGlCQUFpQjtnQkFDbkI7WUFDRjtRQUNGO0lBQ0Y7QUFDRiJ9