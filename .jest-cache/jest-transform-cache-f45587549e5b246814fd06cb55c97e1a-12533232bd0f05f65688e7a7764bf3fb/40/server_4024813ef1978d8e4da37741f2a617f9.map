{"version":3,"sources":["/home/piotr/Desktop/guitar-crm/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient, type CookieOptions } from '@supabase/ssr';\nimport { cookies } from 'next/headers';\nimport { getSupabaseConfig } from './config';\n\n/**\n * If using Fluid compute: Don't put this client in a global variable. Always create a new client within each\n * function when using it.\n */\nexport async function createClient() {\n  const cookieStore = await cookies();\n  const forceRemote = cookieStore.get('sb-provider-preference')?.value === 'remote';\n  const { url, anonKey } = getSupabaseConfig({ forceRemote });\n\n  return createServerClient(url, anonKey, {\n    cookies: {\n      getAll() {\n        return cookieStore.getAll();\n      },\n      setAll(cookiesToSet: { name: string; value: string; options: CookieOptions }[]) {\n        try {\n          cookiesToSet.forEach(({ name, value, options }) => cookieStore.set(name, value, options));\n        } catch {\n          // The `setAll` method was called from a Server Component.\n          // This can be ignored if you have middleware refreshing\n          // user sessions.\n        }\n      },\n    },\n  });\n}\n"],"names":["createClient","cookieStore","cookies","forceRemote","get","value","url","anonKey","getSupabaseConfig","createServerClient","getAll","setAll","cookiesToSet","forEach","name","options","set"],"mappings":";;;;+BAQsBA;;;eAAAA;;;qBARiC;yBAC/B;wBACU;AAM3B,eAAeA;IACpB,MAAMC,cAAc,MAAMC,IAAAA,gBAAO;IACjC,MAAMC,cAAcF,YAAYG,GAAG,CAAC,2BAA2BC,UAAU;IACzE,MAAM,EAAEC,GAAG,EAAEC,OAAO,EAAE,GAAGC,IAAAA,yBAAiB,EAAC;QAAEL;IAAY;IAEzD,OAAOM,IAAAA,uBAAkB,EAACH,KAAKC,SAAS;QACtCL,SAAS;YACPQ;gBACE,OAAOT,YAAYS,MAAM;YAC3B;YACAC,QAAOC,YAAuE;gBAC5E,IAAI;oBACFA,aAAaC,OAAO,CAAC,CAAC,EAAEC,IAAI,EAAET,KAAK,EAAEU,OAAO,EAAE,GAAKd,YAAYe,GAAG,CAACF,MAAMT,OAAOU;gBAClF,EAAE,OAAM;gBACN,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACnB;YACF;QACF;IACF;AACF"}