{"version":3,"sources":["/home/piotr/Desktop/guitar-crm/lib/supabase/config.ts"],"sourcesContent":["export const getSupabaseConfig = (options: { forceRemote?: boolean } = {}) => {\n  const localUrl = process.env.NEXT_PUBLIC_SUPABASE_LOCAL_URL;\n  const localAnonKey = process.env.NEXT_PUBLIC_SUPABASE_LOCAL_ANON_KEY;\n  \n  const remoteUrl = process.env.NEXT_PUBLIC_SUPABASE_REMOTE_URL || process.env.NEXT_PUBLIC_SUPABASE_URL;\n  const remoteAnonKey = process.env.NEXT_PUBLIC_SUPABASE_REMOTE_ANON_KEY || process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\n\n  // console.log('[SupabaseConfig] Checking config:', { options, hasLocalUrl: !!localUrl, hasLocalKey: !!localAnonKey, hasRemoteUrl: !!remoteUrl });\n\n  // Prioritize local if both URL and Key are present, unless forced remote\n  if (!options.forceRemote && localUrl && localAnonKey) {\n    // console.log('[SupabaseConfig] Using Local Config');\n    return {\n      url: localUrl,\n      anonKey: localAnonKey,\n      isLocal: true,\n    };\n  }\n\n  // Fallback to remote\n  if (remoteUrl && remoteAnonKey) {\n    // console.log('[SupabaseConfig] Using Remote Config');\n    return {\n      url: remoteUrl,\n      anonKey: remoteAnonKey,\n      isLocal: false,\n    };\n  }\n\n  console.error('[SupabaseConfig] Missing configuration', { localUrl, remoteUrl });\n  throw new Error('Supabase configuration missing. Please check your .env file.');\n};\n\nexport const getSupabaseAdminConfig = () => {\n  const config = getSupabaseConfig();\n\n  // For admin, we need the service role key.\n  // We assume if we are using local URL, we should use local service role key if available.\n\n  const localServiceRoleKey = process.env.SUPABASE_LOCAL_SERVICE_ROLE_KEY;\n  const remoteServiceRoleKey =\n    process.env.SUPABASE_REMOTE_SERVICE_ROLE_KEY || \n    process.env.SUPABASE_SERVICE_ROLE_KEY || \n    process.env.NEXT_PUBLIC_SUPABASE_SERVICE_ROLE_KEY; // Fallback for some setups\n\n  if (config.isLocal && localServiceRoleKey) {\n    return {\n      ...config,\n      serviceRoleKey: localServiceRoleKey,\n    };\n  }\n\n  if (remoteServiceRoleKey) {\n    return {\n      ...config,\n      serviceRoleKey: remoteServiceRoleKey,\n    };\n  }\n\n  throw new Error('Supabase Admin configuration missing (Service Role Key).');\n};\n"],"names":["getSupabaseAdminConfig","getSupabaseConfig","options","localUrl","process","env","NEXT_PUBLIC_SUPABASE_LOCAL_URL","localAnonKey","NEXT_PUBLIC_SUPABASE_LOCAL_ANON_KEY","remoteUrl","NEXT_PUBLIC_SUPABASE_REMOTE_URL","NEXT_PUBLIC_SUPABASE_URL","remoteAnonKey","NEXT_PUBLIC_SUPABASE_REMOTE_ANON_KEY","NEXT_PUBLIC_SUPABASE_ANON_KEY","forceRemote","url","anonKey","isLocal","console","error","Error","config","localServiceRoleKey","SUPABASE_LOCAL_SERVICE_ROLE_KEY","remoteServiceRoleKey","SUPABASE_REMOTE_SERVICE_ROLE_KEY","SUPABASE_SERVICE_ROLE_KEY","NEXT_PUBLIC_SUPABASE_SERVICE_ROLE_KEY","serviceRoleKey"],"mappings":";;;;;;;;;;;QAiCaA;eAAAA;;QAjCAC;eAAAA;;;AAAN,MAAMA,oBAAoB,CAACC,UAAqC,CAAC,CAAC;IACvE,MAAMC,WAAWC,QAAQC,GAAG,CAACC,8BAA8B;IAC3D,MAAMC,eAAeH,QAAQC,GAAG,CAACG,mCAAmC;IAEpE,MAAMC,YAAYL,QAAQC,GAAG,CAACK,+BAA+B,IAAIN,QAAQC,GAAG,CAACM,wBAAwB;IACrG,MAAMC,gBAAgBR,QAAQC,GAAG,CAACQ,oCAAoC,IAAIT,QAAQC,GAAG,CAACS,6BAA6B;IAEnH,kJAAkJ;IAElJ,yEAAyE;IACzE,IAAI,CAACZ,QAAQa,WAAW,IAAIZ,YAAYI,cAAc;QACpD,sDAAsD;QACtD,OAAO;YACLS,KAAKb;YACLc,SAASV;YACTW,SAAS;QACX;IACF;IAEA,qBAAqB;IACrB,IAAIT,aAAaG,eAAe;QAC9B,uDAAuD;QACvD,OAAO;YACLI,KAAKP;YACLQ,SAASL;YACTM,SAAS;QACX;IACF;IAEAC,QAAQC,KAAK,CAAC,0CAA0C;QAAEjB;QAAUM;IAAU;IAC9E,MAAM,IAAIY,MAAM;AAClB;AAEO,MAAMrB,yBAAyB;IACpC,MAAMsB,SAASrB;IAEf,2CAA2C;IAC3C,0FAA0F;IAE1F,MAAMsB,sBAAsBnB,QAAQC,GAAG,CAACmB,+BAA+B;IACvE,MAAMC,uBACJrB,QAAQC,GAAG,CAACqB,gCAAgC,IAC5CtB,QAAQC,GAAG,CAACsB,yBAAyB,IACrCvB,QAAQC,GAAG,CAACuB,qCAAqC,EAAE,2BAA2B;IAEhF,IAAIN,OAAOJ,OAAO,IAAIK,qBAAqB;QACzC,OAAO;YACL,GAAGD,MAAM;YACTO,gBAAgBN;QAClB;IACF;IAEA,IAAIE,sBAAsB;QACxB,OAAO;YACL,GAAGH,MAAM;YACTO,gBAAgBJ;QAClB;IACF;IAEA,MAAM,IAAIJ,MAAM;AAClB"}